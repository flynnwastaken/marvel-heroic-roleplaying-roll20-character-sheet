<div>
    <button class="tabswitcher" name="act_stats" type="action" >
      Stats
    </button>
    <button class="tabswitcher" name="act_details" type="action" >
      Character Details
    </button>
</div>

<input class="sheet-tabstoggle" name="attr_sheetTab" type="hidden" value="character" />


<div class="stats" >
  <!-- adding buttons and dice pool features REJIGGER POWER SET TO INCLUDE FLEXIBLE #of POWER SETS //-->

  <div class="heroname" >
    <h1>Hero Name</h1>
  </div>
  <div class="heroname_query" >
      <input class="name" name="attr_heroname" type="text" />
  </div>

  <div class="powerpoints" >
    <h2>Power Points</h2>
  </div>
  <div class="ppcounter" >
      <input class="incrementer" name="attr_pp" min="0" placeholder="0" type="number" />
  </div>

  <div class="dicepool" >
    <h2>Dice Pool</h2>
  </div>

    <div class="d4roll" >
      <button name="d4roll" type="roll" value="/roll d4" >
        D4
      </button>
        <input class="incrementer" name="attr_d4pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d6roll" >
      <button name="d6roll" type="roll" value="/roll d6" >
        D6
      </button>
        <input class="incrementer" name="attr_d6pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d8roll" >
      <button name="d8roll" type="roll" value="/roll d8" >
        D8
      </button>
        <input class="incrementer" name="attr_d8pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d10roll" >
      <button name="d10roll" type="roll" value="/roll d10" >
        D10
      </button>
        <input class="incrementer" name="attr_d10pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d12roll" >
      <button name="d12roll" type="roll" value="/roll d12" >
        D12
      </button>
        <input class="incrementer" name="attr_d12pool" min="0" placeholder="0" type="number" />
    </div>

    <div class="poolbuttons" >
      <button name="act_clearpool" type="action" >
        Clear
      </button>
      <p></p>
      <button name="rollpool" type="roll" value="/roll [[0+@{d4pool}]]d4 + [[0+@{d6pool}]]d6 + [[0+@{d8pool}]]d8 + [[0+@{d10pool}]]d10 + [[0+@{d12pool}]]d12" >
        Roll Pool
      </button>
    </div>

    <div class="distinctions" >
      <h2>Distinctions</h2>
    </div>

      <div class="dis1" >
        <input name="attr_dis1" type="text" />
      </div>
      <div class="dis2" >
        <input name="attr_dis2" type="text" />
      </div>
      <div class="dis3" >
        <input name="attr_dis3" type="text" />
      </div>

      <div class="d4distinction">
        <button name="act_d4distinction" type="action" >
          Add D4, +1PP
        </button>
      </div>

      <div class="d8distinction">
        <button name="act_d8add" type="action" >
          Add D8
        </button>
      </div>

      <div class="affiliations">
        <h2>Affiliations</h2>
      </div>

        <div class="solo"
          <strong>Solo</strong>
            <select name="attr_solo">
              <option value="d6">d6</option>
              <option value="d8">d8</option>
              <option value="d10">d10</option>
            </select>
        </div>

        <div class="buddy">
          <strong>Buddy</strong>
            <select name="attr_buddy">
              <option value="d6">d6</option>
              <option value="d8">d8</option>
              <option value="d10">d10</option>
            </select>
        </div>

        <div class="team"
          <strong>Team</strong>
            <select name="attr_team">
              <option value="d6">d6</option>
              <option value="d8">d8</option>
              <option value="d10">d10</option>
            </select>
        </div>

        <div class="d6affiliaton">
          <button name="act_d6add" type="action" >
            Add D6
          </button>
        </div>

        <div class="d8affiliation">
          <button name="act_d8add" type="action" >
            Add D8
          </button>
        </div>

        <div class="d10affiliation">
          <button name="act_d10add" type="action" >
            Add D10
          </button>
        </div>

  <div class="stress">
    <h2>Stress</h2>
  </div>

    <div class="pstress">
      <strong>Physical</strong>
        <select name="attr_pstress">
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option value="Out">Out</option>
        </select>
    </div>

    <div class="mstress">
      <strong>Mental</strong>
        <select name="attr_mstress">
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option value="Out">Out</option>
        </select>
    </div>

    <div class="estress">
      <strong>Emotional</strong>
        <select name="attr_estress">
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option value="Out">Out</option>
        </select>
    </div>

  <div class="trauma">
    <h2>Trauma</h2>
  </div>

    <div class="ptrauma">
      <strong>Physical</strong>
        <select name="attr_ptrauma">
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option value="Dead">Dead</option>
        </select>
    </div>

    <div class="mtrauma">
      <strong>Mental</strong>
        <select name="attr_mtrauma">
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option value="Dead">Dead</option>
        </select>
    </div>

    <div class="etrauma">
      <strong>Emotional</strong>
        <select name="attr_etrauma">
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option value="Dead">Dead</option>
        </select>
    </div>

  <div class="powersets">
    <h2>Power Sets</h2>
  </div>

    <div class="psname1">
      <input type="text" name="attr_psname1" placeholder="Power Set 1" class="name" />
    </div>

      <div class="levelpower1"
        <fieldset class="repeating_pow1">

          <select name="attr_level1">
            <option value="d6">D6 - Minor</option>
            <option value="d8">D8 - Enhanced</option>
            <option value="d10">D10 - Superhuman</option>
            <option value="d12">D12 - Godlike</option>
          </select>

          <input name="attr_power1" placeholder="Power Name" type="text" />
        </fieldset>
      </div>

      <div class="powerbutton1">
        <button name="act_d6add" type="action" >
          Add D6
        </button>

        <button name="act_d8add" type="action" >
          Add D8
        </button>
        <button name="act_d10add" type="action" >
          Add D10
        </button>
        <button name="act_d12add" type="action" >
          Add D12
        </button>
      </div>

        <div class="sfx1">
          <strong>SFX:</strong>

            <fieldset class="repeating_sfx1">
              <input type="text" name="attr_sfx1" class="sub_name" placeholder="SFX Name" />
              <input type="text" name="attr_sfx_desc1" class="description" placeholder="SFX Description" />
            </fieldset>
        </div>

        <div class="limit1">
          <strong>Limit:</strong>

            <fieldset class="repeating_limit1">
              <input type="text" name="attr_limit1" class="sub_name" placeholder="Limit Name" />
              <input type="text" name="attr_limit_desc1" class="description" placeholder="Limit Description" />

              <button name="act_addpp" type="action" >
                +1PP
              </button>
            </fieldset>
        </div>

    <div class="psname2">
      <input type="text" name="attr_psname2" placeholder="Power Set 2" class="name" />
    </div>

      <div class="levelpower2">
        <fieldset class="repeating_pow2">
          <select name="attr_level2">
            <option value="d6">D6 - Minor</option>
            <option value="d8">D8 - Enhanced</option>
            <option value="d10">D10 - Superhuman</option>
            <option value="d12">D12 - Godlike</option>
          </select>

          <input name="attr_power2" placeholder="Power Name" type="text" />
        </fieldset>
      </div>

      <div class="powerbutton2">
        <button name="act_d6add" type="action" >
          Add D6
        </button>
        <button name="act_d8add" type="action" >
          Add D8
        </button>
        <button name="act_d10add" type="action" >
          Add D10
        </button>
        <button name="act_d12add" type="action" >
          Add D12
        </button>
      </div>

        <div class="sfx2">
          <strong>SFX:</strong>

            <fieldset class="repeating_sfx2">
              <input type="text" name="attr_sfx2" class="sub_name" placeholder="SFX Name" />
              <input type="text" name="attr_sfx_desc2" class="description" placeholder="SFX Description" />
            </fieldset>
        </div>

        <div class="limit2">
          <strong>Limit:</strong>

            <fieldset class="repeating_limit2">
              <input type="text" name="attr_limit2" class="sub_name" placeholder="Limit Name" />
              <input type="text" name="attr_limit_desc2" class="description" placeholder="Limit Description" />

              <button name="act_addpp" type="action" >
                +1PP
              </button>
            </fieldset>
        </div>

  <div class="specialties">
    <h2>Specialties</h2>
  </div>

    <div class="specrating">
      <fieldset class="repeating_spec1">

        <select name="attr_spec1">
          <option>Acrobatic</option>
          <option>Business</option>
          <option>Combat</option>
          <option>Cosmic</option>
          <option>Covert</option>
          <option>Crime</option>
          <option>Medical</option>
          <option>Menace</option>
          <option>Mystic</option>
          <option>Psych</option>
          <option>Science</option>
          <option>Tech</option>
          <option>Vehicle</option>
        </select>

        <select name="attr_rating1">
          <option value="d8">Expert - D8 / 2D6</option>
          <option value="d10">Master - D10 / 2D8 / 3D6</option>
        </select>
      </fieldset>
    </div>

    <div class="specdice">
      <button name="act_d8add" type="action" >
        Add D8
      </button>
      <button name="act_add2d6" type="action" >
        Add 2D6
      </button>
      <button name="act_d10add" type="action" >
        Add D10
      </button>
      <button name="act_add2d8" type="action" >
        Add 2D8
      </button>
      <button name="act_add3d6" type="action" >
        Add 3D6
      </button>
    </div>

  <div class="push">
    <h2>Push Dice</h2>
  </div>

    <div class="pushdice">
      <button name="act_push" type="action" >
        Push: Add D6, -1PP
      </button>
      <button name="act_opppush" type="action" >
        Opportunity Push: Add D8, -1PP
      </button>
    </div>

  <div class="stunt">
    <h2>Stunts</h2>
  </div>

    <div class="stuntdice">
      <button name="act_opppush" type="action" >
        Stunt: Add D8, -1PP
      </button>
      <button name="act_oppstunt" type="action" >
        Opportunity Stunt: Add D10, -1PP
      </button>
    </div>

  <div class="resources">
    <h2>Resources</h2>
  </div>

    <div class="resourcenames">
      <fieldset class="repeating_resource">
        <input type="text" name="attr_resource" class="sub_name" placeholder="Resource Name" />
        <input type="text" name="attr_resource" class="description" placeholder="Resource Description" />
      </fieldset>
    </div>

    <div class="resourcebuttons">
      <button name="act_createresource" type="action" >
        Create Resource: -1PP
      </button>
      <button name="act_d6add" type="action" >
        Expert Resource: Add D6
      </button>
      <button name="act_d8add" type="action" >
        Master Resource: Add D8
      </button>
    </div>

  <div class="milestones">
    <h2>Milestones</h2>
  </div>

    <div class="msname1">
      <input class="sub_name" name="attr_milestone1" placeholder="Milestone Name" type="text" />
    </div>

    <div class="1xpbutton1">
      <button name="act_xp1" type="action" value="<!-- increment XP up 1 //-->" >
        +1XP
      </button>
    </div>
    <div class="trigger11">
      <input type="text" name="attr_trigger11" />
    </div>
    <div class="3xpbutton1">
      <button name="act_xp3" type="action" value="<!-- increment XP up 3 //-->" >
        +3XP
      </button>
    </div>
    <div class="trigger13">
      <input type="text" name="attr_trigger13" />
    </div>
    <div class="10xpbutton1">
      <button name="act_xp10" type="action" value="<!-- increment XP up 10 //-->" >
        +10XP
      </button>
    </div>
    <div class=trigger110">
      <input type="text" name="attr_trigger110" />
    </div>

    <div class="msname2">
      <input class="sub_name" name="attr_milestone2" placeholder="Milestone Name" type="text" />
    </div>

    <div class="1xpbutton2">
      <button name="act_xp1" type="action" value="<!-- increment XP up 1 //-->" >
        +1XP
      </button>
    </div>
    <div class="trigger21">
      <input type="text" name="attr_trigger21" />
    </div>
    <div class="3xpbutton2">
      <button name="act_xp3" type="action" value="<!-- increment XP up 3 //-->" >
        +3XP
      </button>
    </div>
    <div class="trigger23">
      <input type="text" name="attr_trigger23" />
    </div>
    <div class="10xpbutton2">
      <button name="act_xp10" type="action" value="<!-- increment XP up 10 //-->" >
        +10XP
      </button>
    </div>
    <div class="trigger210">
      <input type="text" name="attr_trigger210" />
    </div>

  <div class="xp">
    <h2>Experience Points</h2>
  </div>

    <div class="xpcounter">
      <input class="incrementer" name="attr_xp" min="0" placeholder="0" type="number" />
    </div>

    <div class="buypp">
      <button name="act_buypp" type="action" >
        1XP -> 1PP
      </button>
    </div>
</div>


<div class="details">

  <div class="secretpublic">
    <input id="secret" name="attr_secret" type="radio" value="secret" checked />
    <label for="secret">Secret</label>

    <input id="public" name="attr_secret" type="radio" value="public" />
    <label for="public">Public</label>
  </div>

  <div class="identity">
    <input class="name" name="attr_identity" placeholder="Identity" type="text" />
  </div>

  <div class="history">
    <h2>History</h2>
    <input type="text" name="attr_history" />
  </div>

  <div class="personality">
    <h2>Personality</h2>
    <input type="text" name="attr_personality" />

    <h2>Abilities & Resources</h2>
    <input type="text" name="attr_abilities_resources" />
  </div>
</div>


<script type="text/worker">

// makes the sheet tab buttons at the top of the sheet work
  const buttonlist = [ "stats", "details" ];
  buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
      setAttrs({
        sheetTab: button
      });
    });
  });

// makes the "Clear Pool" button work
  on("clicked:clearpool", function() {
    getAttrs(["d4pool", "d6pool", "d8pool", "d10pool", "d12pool"], function(values) {
      setAttrs({
        d4pool: 0,
        d6pool: 0,
        d8pool: 0,
        d10pool: 0,
        d12pool: 0
      });
    });
  });

// makes the "d4 Distinction" button work
  on("clicked:d4distinction", function() {
    getAttrs(["d4pool", "pp"], function(values) {
      let d4pool = parseInt(values.d4pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d4pool;
      ++pp;
      setAttrs({
        d4pool: d4pool,
        pp: pp
      });
    });
  });

// make the various "Add XdX" buttons work
  on("clicked:d4add", function() {
    getAttrs(["d4pool"], function(values) {
      let d4pool = parseInt(values.d4pool,10)||0;
      ++d4pool;
      setAttrs({
        d4pool: d4pool,
      });
    });
  });

  on("clicked:d6add", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      ++d6pool;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

  on("clicked:d8add", function() {
    getAttrs(["d8pool"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      ++d8pool;
      setAttrs({
        d8pool: d8pool,
      });
    });
  });

  on("clicked:d10add", function() {
    getAttrs(["d10pool"], function(values) {
      let d10pool = parseInt(values.d10pool,10)||0;
      ++d10pool;
      setAttrs({
        d10pool: d10pool,
      });
    });
  });

  on("clicked:d12add", function() {
    getAttrs(["d12pool"], function(values) {
      let d12pool = parseInt(values.d12pool,10)||0;
      ++d12pool;
      setAttrs({
        d12pool: d12pool,
      });
    });
  });

  on("clicked:add2d6", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      d6pool = d6pool + 2;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

  on("clicked:add2d8", function() {
    getAttrs(["d8pool"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      d8pool = d8pool + 2;
      setAttrs({
        d8pool: d8pool,
      });
    });
  });

  on("clicked:add3d6", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      d6pool = d6pool + 3;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

// make the "Limit, +1 PP" buttons work
  on("clicked:addpp", function() {
    getAttrs(["pp"], function(values) {
      let pp = parseInt(values.pp,10)||0;
      ++pp;
      setAttrs({
        pp: pp
      });
    });
  });

// make the "Push", "Opportunity Push" and "Stunt" buttons work
  on("clicked:push", function() {
    getAttrs(["d6pool", "pp"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d6pool;
      --pp;
      setAttrs({
        d6pool: d6pool,
        pp: pp
      });
    });
  });

  on("clicked:opppush", function() {
    getAttrs(["d8pool", "pp"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d8pool;
      --pp;
      setAttrs({
        d8pool: d8pool,
        pp: pp
      });
    });
  });

// makes the "Opportunity Stunt" button work
  on("clicked:oppstunt", function() {
    getAttrs(["d10pool", "pp"], function(values) {
      let d10pool = parseInt(values.d10pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d10pool;
      --pp;
      setAttrs({
        d10pool: d10pool,
        pp: pp
      });
    });
  });

// makes the "Create Resource" button work

  on("clicked:createresource", function() {
    getAttrs(["pp"], function(values) {
      let pp = parseInt(values.pp,10)||0;
      --pp;
      setAttrs({
        pp: pp
      });
    });
  });

// make the "+XXP" buttons work
  on("clicked:xp1", function() {
    getAttrs(["xp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      ++xp;
      setAttrs({
        xp: xp,
      });
    });
  });

  on("clicked:xp3", function() {
    getAttrs(["xp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      xp = xp + 3;
      setAttrs({
        xp: xp,
      });
    });
  });

  on("clicked:xp10", function() {
    getAttrs(["xp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      xp = xp + 10;
      setAttrs({
        xp: xp,
      });
    });
  });

// makes the "1XP -> 1PP" button work
  on("clicked:buypp", function() {
    getAttrs(["xp", "pp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      let pp = parseInt(values.pp,10)||0;
      if (xp > 0) {
        --xp;
        ++pp;
        setAttrs({
          xp: xp,
          pp: pp
        });
      };
    });
  });

</script>
