<div>
    <button class="tabswitcher" data-i18n="stats" name="act_stats" type="action" >
      Stats
    </button>
    <button class="tabswitcher" data-i18n="character-details" name="act_details" type="action" >
      Character Details
    </button>
</div>

<input class="sheet-tabstoggle" name="attr_sheetTab" type="hidden" value="character" />


<div class="stats">

  <div class="heroname" >
    <h1 data-i18n="hero-name">Hero Name:</h1>
  </div>
  <div class="heroname_query" >
      <input class="name" name="attr_heroname" spellcheck="false" type="text" />
  </div>

  <div class="powerpoints" >
    <h2 data-i18n="power-points">Power Points</h2>
  </div>
  <div class="ppcounter" >
      <input name="attr_pp" min="0" placeholder="0" type="number" />
  </div>

  <div class="dicepool" >
    <h2 data-i18n="dice-pool">Dice Pool</h2>
  </div>

    <div class="d4roll" >
      <button name="d4roll" type="roll" value="/roll d4" >
        D4
      </button>
        <input name="attr_d4pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d6roll" >
      <button name="d6roll" type="roll" value="/roll d6" >
        D6
      </button>
        <input name="attr_d6pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d8roll" >
      <button name="d8roll" type="roll" value="/roll d8" >
        D8
      </button>
        <input name="attr_d8pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d10roll" >
      <button name="d10roll" type="roll" value="/roll d10" >
        D10
      </button>
        <input name="attr_d10pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d12roll" >
      <button name="d12roll" type="roll" value="/roll d12" >
        D12
      </button>
        <input name="attr_d12pool" min="0" placeholder="0" type="number" />
    </div>

    <div class="poolbuttons" >
      <button data-i18n="clear-dice-pool" name="act_clearpool" type="action" >
        Clear Pool
      </button>
      <button data-i18n="roll-dice-pool" name="rollpool" type="roll" value="/roll [[0+@{d4pool}]]d4 + [[0+@{d6pool}]]d6 + [[0+@{d8pool}]]d8 + [[0+@{d10pool}]]d10 + [[0+@{d12pool}]]d12" >
        Roll Pool
      </button>
    </div>

    <div class="affiliations" >
      <h2 data-i18n="affiliations">Affiliations</h2>
    </div>

      <div class="solo">
        <strong data-i18n="solo">Solo</strong>
          <select class="small" name="attr_solo" >
            <option value="d6">d6</option>
            <option value="d8">d8</option>
            <option value="d10">d10</option>
          </select>
      </div>

      <div class="buddy">
        <strong data-i18n="buddy">Buddy</strong>
          <select class="small" name="attr_buddy" >
            <option value="d6">d6</option>
            <option value="d8">d8</option>
            <option value="d10">d10</option>
          </select>
      </div>

      <div class="team">
        <strong data-i18n="team">Team</strong>
          <select class="small" name="attr_team" >
            <option value="d6">d6</option>
            <option value="d8">d8</option>
            <option value="d10">d10</option>
          </select>
      </div>

    <div class="d6affiliaton">
      <button data-i18n="add-d6-a" name="act_d6add" type="action" >
        Add D6
      </button>
    </div>

    <div class="d8affiliation">
      <button data-i18n="add-d8-a" name="act_d8add" type="action" >
        Add D8
      </button>
    </div>

    <div class="d10affiliation">
      <button data-i18n="add-d10-a" name="act_d10add" type="action" >
        Add D10
      </button>
    </div>

    <div class="distinctions" >
      <h2 data-i18n="distinctions">Distinctions</h2>
    </div>

      <div class="dis1" >
        <input class="description" name="attr_dis1" spellcheck="false" type="text" />
      </div>
      <div class="dis2" >
        <input class="description" name="attr_dis2" spellcheck="false" type="text" />
      </div>
      <div class="dis3" >
        <input class="description" name="attr_dis3" spellcheck="false" type="text" />
      </div>

      <div class="d4distinction">
        <button data-i18n="add-d4-add1-power-point-d" name="act_d4distinction" type="action" >
          Add D4, +1PP
        </button>
      </div>

      <div class="d8distinction">
        <button data-i18n="add-d8-d" name="act_d8add" type="action" >
          Add D8
        </button>
      </div>

  <div class="stress">
    <h2 data-i18n="stress">Stress</h2>
  </div>

    <div class="pstress">
      <strong data-i18n="physical-stress">Physical</strong>
        <select class="small" name="attr_pstress" >
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option data-i18n="knocked-out-physical" value="Out">Out</option>
        </select>
    </div>

    <div class="mstress">
      <strong data-i18n="mental-stress">Mental</strong>
        <select class="small" name="attr_mstress" >
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option data-i18n="knocked-out-mental" value="Out">Out</option>
        </select>
    </div>

    <div class="estress">
      <strong data-i18n="emotional-stress">Emotional</strong>
        <select class="small" name="attr_estress" >
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option data-i18n="knocked-out-emotional" value="Out">Out</option>
        </select>
    </div>

  <div class="trauma">
    <h2 data-i18n="trauma">Trauma</h2>
  </div>

    <div class="ptrauma">
      <strong data-i18n="physical-trauma">Physical</strong>
        <select class="small" name="attr_ptrauma" >
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option data-i18n="physically-dead" value="Dead">Dead</option>
        </select>
    </div>

    <div class="mtrauma">
      <strong data-i18n="mental-trauma">Mental</strong>
        <select class="small" name="attr_mtrauma" >
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option data-i18n="mentally-dead" value="Dead">Dead</option>
        </select>
    </div>

    <div class="etrauma">
      <strong data-i18n="emotional-trauma">Emotional</strong>
        <select class="small" name="attr_etrauma" >
          <option value="0">0</option>
          <option value="d4">d4</option>
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
          <option value="d12">d12</option>
          <option data-i18n="emotionally-dead" value="Dead">Dead</option>
        </select>
    </div>

  <div class="powersets">
    <h2 data-i18n="power-sets">Power Sets</h2>
  </div>

    <div class="psname1">
      <input class="name" name="attr_psname1" data-i18n-placeholder="power-set-1" placeholder="Power Set 1" spellcheck="false" type="text" />
    </div>

      <div class="levelpower1">
        <fieldset class="repeating_pow1" >

          <select class="medium" name="attr_level1" >
            <option data-i18n="d6-minor-ability1" value="d6">D6 - Minor</option>
            <option data-i18n="d8-enhanced-ability1" value="d8">D8 - Enhanced</option>
            <option data-i18n="d10-superhuman-ability1" value="d10">D10 - Superhuman</option>
            <option data-i18n="d12-godlike-ability1" value="d12">D12 - Godlike</option>
          </select>

          <input class="sub_name" name="attr_power1" data-i18n-placeholder="power-name1" placeholder="Power Name" spellcheck="false" type="text" />
        </fieldset>
      </div>

      <div class="powerbutton1" >
        <button data-i18n="add-d6-p1" name="act_d6add" type="action" >
          Add D6
        </button>
        <button data-i18n="add-d8-p1" name="act_d8add" type="action" >
          Add D8
        </button>
        <button data-i18n="add-d10-p1" name="act_d10add" type="action" >
          Add D10
        </button>
        <button data-i18n="add-d12-p1" name="act_d12add" type="action" >
          Add D12
        </button>
      </div>

        <div class="sfx1">
          <strong data-i18n="special-effects-abbr1">SFX:</strong>

            <fieldset class="repeating_sfx1">
              <input class="sub_name" name="attr_sfx1" data-i18n-placeholder="special-effects-abbr-name1" placeholder="SFX Name" spellcheck="false" type="text" />
              <textarea class="short" name="attr_sfx_desc1" data-i18n-placeholder="special-effects-abbr-description1" placeholder="SFX Description" spellcheck="false"></textarea>
            </fieldset>
        </div>

        <div class="limit1">
          <strong data-i18n="limit1">Limit:</strong>

            <fieldset class="repeating_limit1">
              <input class="sub_name" name="attr_limit1" data-i18n-placeholder="limit-name1" placeholder="Limit Name" spellcheck="false" type="text" />
              <textarea class="short" name="attr_limit_desc1" data-i18n-placeholder="limit-description1" placeholder="Limit Description" spellcheck="false"></textarea>

              <button data-i18n="add1-power-point-l1" name="act_addpp" type="action" >
                +1PP
              </button>
            </fieldset>
        </div>

    <div class="psname2">
      <input class="name" name="attr_psname2" data-i18n-placeholder="power-set-2" placeholder="Power Set 2" spellcheck="false" type="text" />
    </div>

      <div class="levelpower2">
        <fieldset class="repeating_pow2">
          <select class="medium" name="attr_level2">
            <option data-i18n="d6-minor-ability2" value="d6">D6 - Minor</option>
            <option data-i18n="d8-enhanced-ability2" value="d8">D8 - Enhanced</option>
            <option data-i18n="d10-superhuman-ability2" value="d10">D10 - Superhuman</option>
            <option data-i18n="d12-godlike-ability2" value="d12">D12 - Godlike</option>
          </select>

          <input class="sub_name" name="attr_power2" data-i18n-placeholder="power-name2" placeholder="Power Name" spellcheck="false" type="text" />
        </fieldset>
      </div>

      <div class="powerbutton2">
        <button data-i18n="add-d6-p2" name="act_d6add" type="action" >
          Add D6
        </button>
        <button data-i18n="add-d8-p2" name="act_d8add" type="action" >
          Add D8
        </button>
        <button data-i18n="add-d10-p2" name="act_d10add" type="action" >
          Add D10
        </button>
        <button data-i18n="add-d12-p2" name="act_d12add" type="action" >
          Add D12
        </button>
      </div>

        <div class="sfx2">
          <strong data-i18n="special-effects-abbr2">SFX:</strong>

            <fieldset class="repeating_sfx2">
              <input class="sub_name" name="attr_sfx2" data-i18n-placeholder="special-effects-abbr-name2" placeholder="SFX Name" spellcheck="false" type="text" />
              <textarea class="short" name="attr_sfx_desc2" data-i18n-placeholder="special-effects-abbr-description2" placeholder="SFX Description" spellcheck="false"></textarea>
            </fieldset>
        </div>

        <div class="limit2">
          <strong data-i18n="limit2">Limit:</strong>

            <fieldset class="repeating_limit2">
              <input class="sub_name" name="attr_limit2" data-i18n-placeholder="limit-name2" placeholder="Limit Name" spellcheck="false" type="text" />
              <textarea class="short" name="attr_limit_desc2" data-i18n-placeholder="limit-description2" placeholder="Limit Description" spellcheck="false"></textarea>

              <button data-i18n="add1-power-point-l2" name="act_addpp" type="action" >
                +1PP
              </button>
            </fieldset>
        </div>

  <div class="specialties">
    <h2 data-i18n="specialties">Specialties</h2>
  </div>

    <div class="specrating">
      <fieldset class="repeating_spec1">

        <select class="small" name="attr_spec1">
          <option data-i18n="choose">Choose...</option>
          <option data-i18n="acrobatic">Acrobatic</option>
          <option data-i18n="business">Business</option>
          <option data-i18n="combat">Combat</option>
          <option data-i18n="cosmic">Cosmic</option>
          <option data-i18n="covert">Covert</option>
          <option data-i18n="crime">Crime</option>
          <option data-i18n="medical">Medical</option>
          <option data-i18n="menace">Menace</option>
          <option data-i18n="mystic">Mystic</option>
          <option data-i18n="psych">Psych</option>
          <option data-i18n="science">Science</option>
          <option data-i18n="tech">Tech</option>
          <option data-i18n="vehicle">Vehicle</option>
        </select>

        <select name="attr_rating1">
          <option data-i18n="expert-d8-2d6" value="d8">Expert - D8 / 2D6</option>
          <option data-i18n="master-d10-2d8-3d6" value="d10">Master - D10 / 2D8 / 3D6</option>
        </select>
      </fieldset>
    </div>

    <div class="specdice">
      <button data-i18n="add-d8-s" name="act_d8add" type="action" >
        Add D8
      </button>
      <button data-i18n="add-2d6-s" name="act_add2d6" type="action" >
        Add 2D6
      </button>
      <button data-i18n="add-d10-s" name="act_d10add" type="action" >
        Add D10
      </button>
      <button data-i18n="add-2d8-s" name="act_add2d8" type="action" >
        Add 2D8
      </button>
      <button data-i18n="add-3d6-s" name="act_add3d6" type="action" >
        Add 3D6
      </button>
    </div>

  <div class="push">
    <h2 data-i18n="push-dice">Push Dice</h2>
  </div>

    <div class="pushdice">
      <button data-i18n="push-add-d6-subtract1-power-point" name="act_push" type="action" >
        Push: Add D6, -1PP
      </button>
      <button data-i18n="opportunity-push-add-d8-subtract1-power-point" name="act_opppush" type="action" >
        Opportunity Push: Add D8, -1PP
      </button>
    </div>

  <div class="stunt">
    <h2 data-i18n="stunts">Stunts</h2>
  </div>

    <div class="stuntdice">
      <button data-i18n="stunt-add-d8-subtract1-power-point" name="act_opppush" type="action" >
        Stunt: Add D8, -1PP
      </button>
      <button data-i18n="opportunity-stunt-add-d10-subtract1-power-point" name="act_oppstunt" type="action" >
        Opportunity Stunt: Add D10, -1PP
      </button>
    </div>

  <div class="resources">
    <h2 data-i18n="resources">Resources</h2>
  </div>

    <div class="resourcenames">
      <fieldset class="repeating_resource">
        <input class="sub_name" name="attr_resource_name" data-i18n-placeholder="resource-name" placeholder="Resource Name" spellcheck="false" type="text" />
        <input class="description" name="attr_resource_desc" data-i18n-placeholder="resource-description" placeholder="Resource Description" spellcheck="false" type="text" />
      </fieldset>
    </div>

    <div class="resourcebuttons">
      <button data-i18n="create-resource-subtract1-power-point" name="act_createresource" type="action" >
        Create Resource: -1PP
      </button>
      <button data-i18n="expert-resource-add-d6" name="act_d6add" type="action" >
        Expert Resource: Add D6
      </button>
      <button data-i18n="master-resource-add-d8" name="act_d8add" type="action" >
        Master Resource: Add D8
      </button>
    </div>

  <div class="milestones">
    <h2 data-i18n="milestones">Milestones</h2>
  </div>

    <div class="msname1">
      <input class="sub_name" name="attr_milestone1" data-i18n-placeholder="milestone-name1" placeholder="Milestone Name" spellcheck="false" type="text" />
    </div>

    <div class="1xpbutton1">
      <button data-i18n="add1-experience-point1" name="act_xp1" type="action" >
        +1XP
      </button>
    </div>
    <div class="trigger11">
      <textarea class="short" name="attr_trigger11" spellcheck="false"></textarea>
    </div>
    <div class="3xpbutton1">
      <button data-i18n="add3-experience-points1" name="act_xp3" type="action" >
        +3XP
      </button>
    </div>
    <div class="trigger13">
      <textarea class="short" name="attr_trigger13" spellcheck="false"></textarea>
    </div>
    <div class="10xpbutton1">
      <button data-i18n="add10-experience-points1" name="act_xp10" type="action" >
        +10XP
      </button>
    </div>
    <div class=trigger110">
      <textarea class="short" name="attr_trigger110" spellcheck="false"></textarea>
    </div>

    <div class="msname2">
      <input class="sub_name" name="attr_milestone2" data-i18n-placeholder="milestone-name2" placeholder="Milestone Name" spellcheck="false" type="text" />
    </div>

    <div class="1xpbutton2">
      <button data-i18n="add1-experience-point2" name="act_xp1" type="action" >
        +1XP
      </button>
    </div>
    <div class="trigger21">
      <textarea class="short" name="attr_trigger21" spellcheck="false"></textarea>
    </div>
    <div class="3xpbutton2">
      <button data-i18n="add3-experience-points2" name="act_xp3" type="action" >
        +3XP
      </button>
    </div>
    <div class="trigger23">
      <textarea class="short" name="attr_trigger23" spellcheck="false"></textarea>
    </div>
    <div class="10xpbutton2">
      <button data-i18n="add10-experience-points2" name="act_xp10" type="action" >
        +10XP
      </button>
    </div>
    <div class="trigger210">
      <textarea class="short" name="attr_trigger210" spellcheck="false"></textarea>
    </div>

  <div class="xp">
    <h2 data-i18n="experience-points">Experience Points</h2>
  </div>

    <div class="xpcounter">
      <input name="attr_xp" min="0" placeholder="0" type="number" />
    </div>

    <div class="buypp">
      <button data-i18n="1experience-point-exchanged-for-1power-point" name="act_buypp" type="action" >
        1XP -> 1PP
      </button>
    </div>
</div>


<div class="details">

  <div class="secretpublic">
    <input id="secret" name="attr_secret" type="radio" value="secret" checked="true" />
    <label data-i18n="secret-identity" for="secret">Secret</label>

    <input id="public" name="attr_secret" type="radio" value="public" />
    <label data-i18n="public-identity" for="public">Public</label>
  </div>

  <div class="identity">
    <input class="name" name="attr_identity" data-i18n-placeholder="identity" placeholder="Identity" spellcheck="false" type="text" />
  </div>

  <div class="history">
    <h2 data-i18n="history">History</h2>
    <textarea class="tall" name="attr_history" spellcheck="false"></textarea>
  </div>

  <div class="personality">
    <h2 data-i18n="personality">Personality</h2>
    <textarea name="attr_personality" spellcheck="false"></textarea>

    <h2 data-i18n="abilities-and-resources">Abilities & Resources</h2>
    <textarea name="attr_abilities_resources" spellcheck="false"></textarea>
  </div>
</div>


<script type="text/worker">

// makes the sheet tab buttons at the top of the sheet work
  const buttonlist = [ "stats", "details" ];
  buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
      setAttrs({
        sheetTab: button
      });
    });
  });

// makes the "Clear Pool" button work
  on("clicked:clearpool", function() {
    getAttrs(["d4pool", "d6pool", "d8pool", "d10pool", "d12pool"], function(values) {
      setAttrs({
        d4pool: 0,
        d6pool: 0,
        d8pool: 0,
        d10pool: 0,
        d12pool: 0
      });
    });
  });

// makes the "d4 Distinction" button work
  on("clicked:d4distinction", function() {
    getAttrs(["d4pool", "pp"], function(values) {
      let d4pool = parseInt(values.d4pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d4pool;
      ++pp;
      setAttrs({
        d4pool: d4pool,
        pp: pp
      });
    });
  });

// make the various "Add XdX" buttons work
  on("clicked:d4add", function() {
    getAttrs(["d4pool"], function(values) {
      let d4pool = parseInt(values.d4pool,10)||0;
      ++d4pool;
      setAttrs({
        d4pool: d4pool,
      });
    });
  });

  on("clicked:d6add", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      ++d6pool;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

  on("clicked:d8add", function() {
    getAttrs(["d8pool"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      ++d8pool;
      setAttrs({
        d8pool: d8pool,
      });
    });
  });

  on("clicked:d10add", function() {
    getAttrs(["d10pool"], function(values) {
      let d10pool = parseInt(values.d10pool,10)||0;
      ++d10pool;
      setAttrs({
        d10pool: d10pool,
      });
    });
  });

  on("clicked:d12add", function() {
    getAttrs(["d12pool"], function(values) {
      let d12pool = parseInt(values.d12pool,10)||0;
      ++d12pool;
      setAttrs({
        d12pool: d12pool,
      });
    });
  });

  on("clicked:add2d6", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      d6pool = d6pool + 2;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

  on("clicked:add2d8", function() {
    getAttrs(["d8pool"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      d8pool = d8pool + 2;
      setAttrs({
        d8pool: d8pool,
      });
    });
  });

  on("clicked:add3d6", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      d6pool = d6pool + 3;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

// make the "Limit, +1 PP" buttons work
  on("clicked:addpp", function() {
    getAttrs(["pp"], function(values) {
      let pp = parseInt(values.pp,10)||0;
      ++pp;
      setAttrs({
        pp: pp,
      });
    });
  });

// make the "Push", "Opportunity Push" and "Stunt" buttons work
  on("clicked:push", function() {
    getAttrs(["d6pool", "pp"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d6pool;
      --pp;
      setAttrs({
        d6pool: d6pool,
        pp: pp
      });
    });
  });

  on("clicked:opppush", function() {
    getAttrs(["d8pool", "pp"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d8pool;
      --pp;
      setAttrs({
        d8pool: d8pool,
        pp: pp
      });
    });
  });

// makes the "Opportunity Stunt" button work
  on("clicked:oppstunt", function() {
    getAttrs(["d10pool", "pp"], function(values) {
      let d10pool = parseInt(values.d10pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d10pool;
      --pp;
      setAttrs({
        d10pool: d10pool,
        pp: pp
      });
    });
  });

// makes the "Create Resource" button work

  on("clicked:createresource", function() {
    getAttrs(["pp"], function(values) {
      let pp = parseInt(values.pp,10)||0;
      --pp;
      setAttrs({
        pp: pp,
      });
    });
  });

// make the "+XXP" buttons work
  on("clicked:xp1", function() {
    getAttrs(["xp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      ++xp;
      setAttrs({
        xp: xp,
      });
    });
  });

  on("clicked:xp3", function() {
    getAttrs(["xp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      xp = xp + 3;
      setAttrs({
        xp: xp,
      });
    });
  });

  on("clicked:xp10", function() {
    getAttrs(["xp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      xp = xp + 10;
      setAttrs({
        xp: xp,
      });
    });
  });

// makes the "1XP -> 1PP" button work
  on("clicked:buypp", function() {
    getAttrs(["xp", "pp"], function(values) {
      let xp = parseInt(values.xp,10)||0;
      let pp = parseInt(values.pp,10)||0;
      if (xp > 0) {
        --xp;
        ++pp;
        setAttrs({
          xp: xp,
          pp: pp
        });
      };
    });
  });

</script>
